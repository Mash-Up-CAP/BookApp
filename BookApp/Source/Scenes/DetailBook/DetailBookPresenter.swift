//
//  DetailBookPresenter.swift
//  BookApp
//
//  Created by Julia on 2023/03/09.
//  Copyright (c) 2023 ___ORGANIZATIONNAME___. All rights reserved.
//
//  This file was generated by the Clean Swift Xcode Templates so
//  you can apply clean architecture to your iOS and Mac projects,
//  see http://clean-swift.com
//

import UIKit

protocol DetailBookPresentationLogic {
  func presentBook(response: DetailBook.GetBook.Response)
}

final class DetailBookPresenter: DetailBookPresentationLogic {
    
  weak var viewController: DetailBookDisplayLogic?
    
  func presentBook(response: DetailBook.GetBook.Response) {
      let book = response.book
      guard let categories = book.categories?.joined(separator: " | "),
            let authors = book.author?.joined(separator: ", "),
            let thumbnailURL = URL(string: book.thumbnailLink ?? ""),
            let description = book.description,
            let publisher = book.publisher,
            let publishedDate = book.publishedDate else { return }
      let displayedBook = DetailBook.GetBook.ViewModel.DisplayedBook(title: book.title,
                                                                     author: authors,
                                                                     thumbnailURL: thumbnailURL,
                                                                     pageCount: "\(String(describing: book.pageCount)) ìª½",
                                                                     categories: categories,
                                                                     description: description,
                                                                     publisher: publisher,
                                                                     publishedDate: publishedDate )
      
      let viewModel = DetailBook.GetBook.ViewModel(displayedBook: displayedBook)
      viewController?.displaySomething(viewModel: viewModel)
  }
}
